{"ast":null,"code":"import { createMachine, forwardTo, assign, spawn, actions } from 'xstate';\nimport '@aws-amplify/core/internals/utils';\nimport '../../utils/setUserAgent/constants.mjs';\nimport { isEmptyObject } from '../../utils/utils.mjs';\nimport ACTIONS from './actions.mjs';\nimport GUARDS from './guards.mjs';\nimport { forgotPasswordActor } from './actors/forgotPassword.mjs';\nimport { signInActor } from './actors/signIn.mjs';\nimport { signUpActor } from './actors/signUp.mjs';\nimport { signOutActor } from './actors/signOut.mjs';\nimport { verifyUserAttributesActor } from './actors/verifyUserAttributes.mjs';\nimport { defaultServices } from './defaultServices.mjs';\nconst getActorContext = (context, defaultStep) => {\n  var _context$actorDoneDat, _context$actorDoneDat2, _context$config, _context$config2, _context$config3, _context$config4, _context$config5;\n  return {\n    ...context.actorDoneData,\n    step: (_context$actorDoneDat = context === null || context === void 0 || (_context$actorDoneDat2 = context.actorDoneData) === null || _context$actorDoneDat2 === void 0 ? void 0 : _context$actorDoneDat2.step) !== null && _context$actorDoneDat !== void 0 ? _context$actorDoneDat : defaultStep,\n    // initialize empty objects on actor start\n    formValues: {},\n    touched: {},\n    validationError: {},\n    // values included on `context.config` that should be available in actors\n    formFields: (_context$config = context.config) === null || _context$config === void 0 ? void 0 : _context$config.formFields,\n    loginMechanisms: (_context$config2 = context.config) === null || _context$config2 === void 0 ? void 0 : _context$config2.loginMechanisms,\n    passwordSettings: (_context$config3 = context.config) === null || _context$config3 === void 0 ? void 0 : _context$config3.passwordSettings,\n    signUpAttributes: (_context$config4 = context.config) === null || _context$config4 === void 0 ? void 0 : _context$config4.signUpAttributes,\n    socialProviders: (_context$config5 = context.config) === null || _context$config5 === void 0 ? void 0 : _context$config5.socialProviders\n  };\n};\nconst {\n  choose,\n  stop\n} = actions;\nconst stopActor = machineId => stop(machineId);\n// setup step waits for ui to emit INIT action to proceed to configure\nconst LEGACY_WAIT_CONFIG = {\n  on: {\n    INIT: {\n      actions: 'configure',\n      target: 'getConfig'\n    },\n    SIGN_OUT: '#authenticator.signOut'\n  }\n};\n// setup step proceeds directly to configure\nconst NEXT_WAIT_CONFIG = {\n  always: {\n    actions: 'configure',\n    target: 'getConfig'\n  }\n};\nfunction createAuthenticatorMachine(options) {\n  const {\n    useNextWaitConfig,\n    ...overrideConfigServices\n  } = options !== null && options !== void 0 ? options : {};\n  const initConfig = useNextWaitConfig ? NEXT_WAIT_CONFIG : LEGACY_WAIT_CONFIG;\n  return createMachine({\n    id: 'authenticator',\n    initial: 'idle',\n    context: {\n      user: undefined,\n      config: {},\n      services: defaultServices,\n      actorRef: undefined,\n      hasSetup: false\n    },\n    predictableActionArguments: true,\n    states: {\n      // See: https://xstate.js.org/docs/guides/communication.html#invoking-promises\n      idle: {\n        invoke: {\n          src: 'handleGetCurrentUser',\n          onDone: {\n            actions: 'setUser',\n            target: 'setup'\n          },\n          onError: {\n            target: 'setup'\n          }\n        }\n      },\n      setup: {\n        initial: 'initConfig',\n        states: {\n          initConfig,\n          getConfig: {\n            invoke: {\n              src: 'getAmplifyConfig',\n              onDone: [{\n                actions: ['applyAmplifyConfig', 'setHasSetup'],\n                cond: 'hasUser',\n                target: '#authenticator.authenticated'\n              }, {\n                actions: ['applyAmplifyConfig', 'setHasSetup'],\n                target: 'goToInitialState'\n              }]\n            }\n          },\n          goToInitialState: {\n            always: [{\n              cond: 'isInitialStateSignUp',\n              target: '#authenticator.signUpActor'\n            }, {\n              cond: 'isInitialStateResetPassword',\n              target: '#authenticator.forgotPasswordActor'\n            }, {\n              target: '#authenticator.signInActor'\n            }]\n          }\n        }\n      },\n      getCurrentUser: {\n        invoke: {\n          src: 'handleGetCurrentUser',\n          onDone: {\n            actions: 'setUser',\n            target: '#authenticator.authenticated'\n          },\n          onError: {\n            target: '#authenticator.setup'\n          }\n        }\n      },\n      signInActor: {\n        initial: 'spawnActor',\n        states: {\n          spawnActor: {\n            always: {\n              actions: 'spawnSignInActor',\n              target: 'runActor'\n            }\n          },\n          runActor: {\n            entry: 'clearActorDoneData',\n            exit: stopActor('signInActor')\n          }\n        },\n        on: {\n          FORGOT_PASSWORD: 'forgotPasswordActor',\n          SIGN_IN: 'signInActor',\n          SIGN_UP: 'signUpActor',\n          'done.invoke.signInActor': [{\n            cond: 'hasCompletedAttributeConfirmation',\n            target: '#authenticator.getCurrentUser'\n          }, {\n            cond: 'isShouldConfirmUserAttributeStep',\n            actions: 'setActorDoneData',\n            target: '#authenticator.verifyUserAttributesActor'\n          }, {\n            cond: 'isResetPasswordStep',\n            actions: 'setActorDoneData',\n            target: '#authenticator.forgotPasswordActor'\n          }, {\n            cond: 'isConfirmSignUpStep',\n            actions: 'setActorDoneData',\n            target: '#authenticator.signUpActor'\n          }]\n        }\n      },\n      signUpActor: {\n        initial: 'spawnActor',\n        states: {\n          spawnActor: {\n            always: {\n              actions: 'spawnSignUpActor',\n              target: 'runActor'\n            }\n          },\n          runActor: {\n            entry: 'clearActorDoneData',\n            exit: stopActor('signUpActor')\n          }\n        },\n        on: {\n          SIGN_IN: 'signInActor',\n          'done.invoke.signUpActor': [{\n            cond: 'hasCompletedAttributeConfirmation',\n            target: '#authenticator.getCurrentUser'\n          }, {\n            cond: 'isShouldConfirmUserAttributeStep',\n            actions: 'setActorDoneData',\n            target: '#authenticator.verifyUserAttributesActor'\n          }, {\n            cond: 'isConfirmUserAttributeStep',\n            target: '#authenticator.verifyUserAttributesActor'\n          }, {\n            actions: 'setActorDoneData',\n            target: '#authenticator.signInActor'\n          }]\n        }\n      },\n      forgotPasswordActor: {\n        initial: 'spawnActor',\n        states: {\n          spawnActor: {\n            always: {\n              actions: 'spawnForgotPasswordActor',\n              target: 'runActor'\n            }\n          },\n          runActor: {\n            entry: 'clearActorDoneData',\n            exit: stopActor('forgotPasswordActor')\n          }\n        },\n        on: {\n          SIGN_IN: 'signInActor',\n          'done.invoke.forgotPasswordActor': [{\n            target: '#authenticator.signInActor'\n          }]\n        }\n      },\n      verifyUserAttributesActor: {\n        initial: 'spawnActor',\n        states: {\n          spawnActor: {\n            always: {\n              actions: 'spawnVerifyUserAttributesActor',\n              target: 'runActor'\n            }\n          },\n          runActor: {\n            entry: 'clearActorDoneData',\n            exit: stopActor('verifyUserAttributesActor')\n          }\n        },\n        on: {\n          'done.invoke.verifyUserAttributesActor': [{\n            actions: 'setActorDoneData',\n            target: '#authenticator.getCurrentUser'\n          }]\n        }\n      },\n      authenticated: {\n        initial: 'idle',\n        states: {\n          idle: {\n            on: {\n              TOKEN_REFRESH: 'refreshUser'\n            }\n          },\n          refreshUser: {\n            invoke: {\n              src: '#authenticator.getCurrentUser',\n              onDone: {\n                actions: 'setUser',\n                target: 'idle'\n              },\n              onError: {\n                target: '#authenticator.signOut'\n              }\n            }\n          }\n        },\n        on: {\n          SIGN_OUT: 'signOut'\n        }\n      },\n      signOut: {\n        initial: 'spawnActor',\n        states: {\n          spawnActor: {\n            always: {\n              actions: 'spawnSignOutActor',\n              target: 'runActor'\n            }\n          },\n          runActor: {\n            entry: 'clearActorDoneData',\n            exit: stopActor('signOutActor')\n          }\n        },\n        on: {\n          'done.invoke.signOutActor': {\n            actions: 'clearUser',\n            target: 'setup.getConfig'\n          }\n        }\n      }\n    },\n    on: {\n      SIGN_IN_WITH_REDIRECT: {\n        target: '#authenticator.getCurrentUser'\n      },\n      CHANGE: {\n        actions: 'forwardToActor'\n      },\n      BLUR: {\n        actions: 'forwardToActor'\n      },\n      SUBMIT: {\n        actions: 'forwardToActor'\n      },\n      FEDERATED_SIGN_IN: {\n        actions: 'forwardToActor'\n      },\n      RESEND: {\n        actions: 'forwardToActor'\n      },\n      SIGN_IN: {\n        actions: 'forwardToActor'\n      },\n      SKIP: {\n        actions: 'forwardToActor'\n      }\n    }\n  }, {\n    actions: {\n      ...ACTIONS,\n      forwardToActor: choose([{\n        cond: 'hasActor',\n        actions: forwardTo(_ref => {\n          let {\n            actorRef\n          } = _ref;\n          return actorRef;\n        })\n      }]),\n      setActorDoneData: assign({\n        actorDoneData: (context, event) => ({\n          challengeName: event.data.challengeName,\n          codeDeliveryDetails: event.data.codeDeliveryDetails,\n          missingAttributes: event.data.missingAttributes,\n          remoteError: event.data.remoteError,\n          username: event.data.username,\n          step: event.data.step,\n          totpSecretCode: event.data.totpSecretCode,\n          unverifiedUserAttributes: event.data.unverifiedUserAttributes\n        })\n      }),\n      applyAmplifyConfig: assign({\n        config(context, _ref2) {\n          var _cliConfig$loginMecha, _cliConfig$signUpAttr, _cliConfig$socialProv, _cliConfig$passwordFo, _convertFormFields;\n          let {\n            data: cliConfig\n          } = _ref2;\n          // Prefer explicitly configured settings over default CLI values\\\n          const {\n            loginMechanisms = (_cliConfig$loginMecha = cliConfig.loginMechanisms) !== null && _cliConfig$loginMecha !== void 0 ? _cliConfig$loginMecha : [],\n            signUpAttributes = (_cliConfig$signUpAttr = cliConfig.signUpAttributes) !== null && _cliConfig$signUpAttr !== void 0 ? _cliConfig$signUpAttr : [],\n            socialProviders = (_cliConfig$socialProv = cliConfig.socialProviders) !== null && _cliConfig$socialProv !== void 0 ? _cliConfig$socialProv : [],\n            initialState,\n            formFields: _formFields,\n            passwordSettings = (_cliConfig$passwordFo = cliConfig.passwordFormat) !== null && _cliConfig$passwordFo !== void 0 ? _cliConfig$passwordFo : {}\n          } = context.config;\n          // By default, Cognito assumes `username`, so there isn't a different username attribute like `email`.\n          // We explicitly add it as a login mechanism to be consistent with Admin UI's language.\n          if (loginMechanisms.length === 0) {\n            loginMechanisms.push('username');\n          }\n          const formFields = (_convertFormFields = convertFormFields(_formFields)) !== null && _convertFormFields !== void 0 ? _convertFormFields : {};\n          return {\n            formFields,\n            initialState,\n            loginMechanisms,\n            passwordSettings,\n            signUpAttributes,\n            socialProviders\n          };\n        }\n      }),\n      spawnSignInActor: assign({\n        actorRef: (context, _) => {\n          const {\n            services\n          } = context;\n          const actor = signInActor({\n            services\n          }).withContext(getActorContext(context, 'SIGN_IN'));\n          return spawn(actor, {\n            name: 'signInActor'\n          });\n        }\n      }),\n      spawnSignUpActor: assign({\n        actorRef: (context, _) => {\n          const {\n            services\n          } = context;\n          const actor = signUpActor({\n            services\n          }).withContext(getActorContext(context, 'SIGN_UP'));\n          return spawn(actor, {\n            name: 'signUpActor'\n          });\n        }\n      }),\n      spawnForgotPasswordActor: assign({\n        actorRef: (context, _) => {\n          const {\n            services\n          } = context;\n          const actor = forgotPasswordActor({\n            services\n          }).withContext(getActorContext(context, 'FORGOT_PASSWORD'));\n          return spawn(actor, {\n            name: 'forgotPasswordActor'\n          });\n        }\n      }),\n      spawnVerifyUserAttributesActor: assign({\n        actorRef: context => {\n          const actor = verifyUserAttributesActor().withContext(getActorContext(context));\n          return spawn(actor, {\n            name: 'verifyUserAttributesActor'\n          });\n        }\n      }),\n      spawnSignOutActor: assign({\n        actorRef: context => {\n          const actor = signOutActor().withContext({\n            user: context === null || context === void 0 ? void 0 : context.user\n          });\n          return spawn(actor, {\n            name: 'signOutActor'\n          });\n        }\n      }),\n      configure: assign((_, event) => {\n        var _event$data;\n        const {\n          services: customServices,\n          ...config\n        } = !isEmptyObject(overrideConfigServices) ? overrideConfigServices : (_event$data = event.data) !== null && _event$data !== void 0 ? _event$data : {};\n        return {\n          services: {\n            ...defaultServices,\n            ...customServices\n          },\n          config\n        };\n      }),\n      setHasSetup: assign({\n        hasSetup: true\n      })\n    },\n    guards: {\n      ...GUARDS,\n      hasActor: _ref3 => {\n        let {\n          actorRef\n        } = _ref3;\n        return !!actorRef;\n      },\n      isInitialStateSignUp: _ref4 => {\n        let {\n          config\n        } = _ref4;\n        return config.initialState === 'signUp';\n      },\n      isInitialStateResetPassword: _ref5 => {\n        let {\n          config\n        } = _ref5;\n        return config.initialState === 'forgotPassword';\n      },\n      shouldSetup: _ref6 => {\n        let {\n          hasSetup\n        } = _ref6;\n        return !hasSetup;\n      },\n      hasUser: _ref7 => {\n        let {\n          user\n        } = _ref7;\n        return !!user;\n      }\n    },\n    services: {\n      getAmplifyConfig: _ref8 => {\n        let {\n          services\n        } = _ref8;\n        return services.getAmplifyConfig();\n      },\n      handleGetCurrentUser: _ref9 => {\n        let {\n          services\n        } = _ref9;\n        return services.getCurrentUser();\n      }\n    }\n  });\n}\nfunction convertFormFields(formFields) {\n  if (formFields) {\n    Object.keys(formFields).forEach(component => {\n      Object.keys(formFields[component]).forEach(inputName => {\n        let ff = formFields[component][inputName];\n        ff.required = ff.isRequired;\n      });\n    });\n  }\n  return formFields;\n}\nexport { createAuthenticatorMachine };","map":{"version":3,"names":["createMachine","forwardTo","assign","spawn","actions","isEmptyObject","ACTIONS","GUARDS","forgotPasswordActor","signInActor","signUpActor","signOutActor","verifyUserAttributesActor","defaultServices","getActorContext","context","defaultStep","_context$actorDoneDat","_context$actorDoneDat2","_context$config","_context$config2","_context$config3","_context$config4","_context$config5","actorDoneData","step","formValues","touched","validationError","formFields","config","loginMechanisms","passwordSettings","signUpAttributes","socialProviders","choose","stop","stopActor","machineId","LEGACY_WAIT_CONFIG","on","INIT","target","SIGN_OUT","NEXT_WAIT_CONFIG","always","createAuthenticatorMachine","options","useNextWaitConfig","overrideConfigServices","initConfig","id","initial","user","undefined","services","actorRef","hasSetup","predictableActionArguments","states","idle","invoke","src","onDone","onError","setup","getConfig","cond","goToInitialState","getCurrentUser","spawnActor","runActor","entry","exit","FORGOT_PASSWORD","SIGN_IN","SIGN_UP","authenticated","TOKEN_REFRESH","refreshUser","signOut","SIGN_IN_WITH_REDIRECT","CHANGE","BLUR","SUBMIT","FEDERATED_SIGN_IN","RESEND","SKIP","forwardToActor","_ref","setActorDoneData","event","challengeName","data","codeDeliveryDetails","missingAttributes","remoteError","username","totpSecretCode","unverifiedUserAttributes","applyAmplifyConfig","_ref2","_cliConfig$loginMecha","_cliConfig$signUpAttr","_cliConfig$socialProv","_cliConfig$passwordFo","_convertFormFields","cliConfig","initialState","_formFields","passwordFormat","length","push","convertFormFields","spawnSignInActor","_","actor","withContext","name","spawnSignUpActor","spawnForgotPasswordActor","spawnVerifyUserAttributesActor","spawnSignOutActor","configure","_event$data","customServices","setHasSetup","guards","hasActor","_ref3","isInitialStateSignUp","_ref4","isInitialStateResetPassword","_ref5","shouldSetup","_ref6","hasUser","_ref7","getAmplifyConfig","_ref8","handleGetCurrentUser","_ref9","Object","keys","forEach","component","inputName","ff","required","isRequired"],"sources":["/Users/raphaperso/Documents/Hub/amplify_test/notes/node_modules/@aws-amplify/ui/dist/esm/machines/authenticator/index.mjs"],"sourcesContent":["import { createMachine, forwardTo, assign, spawn, actions } from 'xstate';\nimport '@aws-amplify/core/internals/utils';\nimport '../../utils/setUserAgent/constants.mjs';\nimport { isEmptyObject } from '../../utils/utils.mjs';\nimport ACTIONS from './actions.mjs';\nimport GUARDS from './guards.mjs';\nimport { forgotPasswordActor } from './actors/forgotPassword.mjs';\nimport { signInActor } from './actors/signIn.mjs';\nimport { signUpActor } from './actors/signUp.mjs';\nimport { signOutActor } from './actors/signOut.mjs';\nimport { verifyUserAttributesActor } from './actors/verifyUserAttributes.mjs';\nimport { defaultServices } from './defaultServices.mjs';\n\nconst getActorContext = (context, defaultStep) => ({\n    ...context.actorDoneData,\n    step: context?.actorDoneData?.step ?? defaultStep,\n    // initialize empty objects on actor start\n    formValues: {},\n    touched: {},\n    validationError: {},\n    // values included on `context.config` that should be available in actors\n    formFields: context.config?.formFields,\n    loginMechanisms: context.config?.loginMechanisms,\n    passwordSettings: context.config?.passwordSettings,\n    signUpAttributes: context.config?.signUpAttributes,\n    socialProviders: context.config?.socialProviders,\n});\nconst { choose, stop } = actions;\nconst stopActor = (machineId) => stop(machineId);\n// setup step waits for ui to emit INIT action to proceed to configure\nconst LEGACY_WAIT_CONFIG = {\n    on: {\n        INIT: {\n            actions: 'configure',\n            target: 'getConfig',\n        },\n        SIGN_OUT: '#authenticator.signOut',\n    },\n};\n// setup step proceeds directly to configure\nconst NEXT_WAIT_CONFIG = {\n    always: { actions: 'configure', target: 'getConfig' },\n};\nfunction createAuthenticatorMachine(options) {\n    const { useNextWaitConfig, ...overrideConfigServices } = options ?? {};\n    const initConfig = useNextWaitConfig ? NEXT_WAIT_CONFIG : LEGACY_WAIT_CONFIG;\n    return createMachine({\n        id: 'authenticator',\n        initial: 'idle',\n        context: {\n            user: undefined,\n            config: {},\n            services: defaultServices,\n            actorRef: undefined,\n            hasSetup: false,\n        },\n        predictableActionArguments: true,\n        states: {\n            // See: https://xstate.js.org/docs/guides/communication.html#invoking-promises\n            idle: {\n                invoke: {\n                    src: 'handleGetCurrentUser',\n                    onDone: { actions: 'setUser', target: 'setup' },\n                    onError: { target: 'setup' },\n                },\n            },\n            setup: {\n                initial: 'initConfig',\n                states: {\n                    initConfig,\n                    getConfig: {\n                        invoke: {\n                            src: 'getAmplifyConfig',\n                            onDone: [\n                                {\n                                    actions: ['applyAmplifyConfig', 'setHasSetup'],\n                                    cond: 'hasUser',\n                                    target: '#authenticator.authenticated',\n                                },\n                                {\n                                    actions: ['applyAmplifyConfig', 'setHasSetup'],\n                                    target: 'goToInitialState',\n                                },\n                            ],\n                        },\n                    },\n                    goToInitialState: {\n                        always: [\n                            {\n                                cond: 'isInitialStateSignUp',\n                                target: '#authenticator.signUpActor',\n                            },\n                            {\n                                cond: 'isInitialStateResetPassword',\n                                target: '#authenticator.forgotPasswordActor',\n                            },\n                            { target: '#authenticator.signInActor' },\n                        ],\n                    },\n                },\n            },\n            getCurrentUser: {\n                invoke: {\n                    src: 'handleGetCurrentUser',\n                    onDone: {\n                        actions: 'setUser',\n                        target: '#authenticator.authenticated',\n                    },\n                    onError: { target: '#authenticator.setup' },\n                },\n            },\n            signInActor: {\n                initial: 'spawnActor',\n                states: {\n                    spawnActor: {\n                        always: { actions: 'spawnSignInActor', target: 'runActor' },\n                    },\n                    runActor: {\n                        entry: 'clearActorDoneData',\n                        exit: stopActor('signInActor'),\n                    },\n                },\n                on: {\n                    FORGOT_PASSWORD: 'forgotPasswordActor',\n                    SIGN_IN: 'signInActor',\n                    SIGN_UP: 'signUpActor',\n                    'done.invoke.signInActor': [\n                        {\n                            cond: 'hasCompletedAttributeConfirmation',\n                            target: '#authenticator.getCurrentUser',\n                        },\n                        {\n                            cond: 'isShouldConfirmUserAttributeStep',\n                            actions: 'setActorDoneData',\n                            target: '#authenticator.verifyUserAttributesActor',\n                        },\n                        {\n                            cond: 'isResetPasswordStep',\n                            actions: 'setActorDoneData',\n                            target: '#authenticator.forgotPasswordActor',\n                        },\n                        {\n                            cond: 'isConfirmSignUpStep',\n                            actions: 'setActorDoneData',\n                            target: '#authenticator.signUpActor',\n                        },\n                    ],\n                },\n            },\n            signUpActor: {\n                initial: 'spawnActor',\n                states: {\n                    spawnActor: {\n                        always: { actions: 'spawnSignUpActor', target: 'runActor' },\n                    },\n                    runActor: {\n                        entry: 'clearActorDoneData',\n                        exit: stopActor('signUpActor'),\n                    },\n                },\n                on: {\n                    SIGN_IN: 'signInActor',\n                    'done.invoke.signUpActor': [\n                        {\n                            cond: 'hasCompletedAttributeConfirmation',\n                            target: '#authenticator.getCurrentUser',\n                        },\n                        {\n                            cond: 'isShouldConfirmUserAttributeStep',\n                            actions: 'setActorDoneData',\n                            target: '#authenticator.verifyUserAttributesActor',\n                        },\n                        {\n                            cond: 'isConfirmUserAttributeStep',\n                            target: '#authenticator.verifyUserAttributesActor',\n                        },\n                        {\n                            actions: 'setActorDoneData',\n                            target: '#authenticator.signInActor',\n                        },\n                    ],\n                },\n            },\n            forgotPasswordActor: {\n                initial: 'spawnActor',\n                states: {\n                    spawnActor: {\n                        always: {\n                            actions: 'spawnForgotPasswordActor',\n                            target: 'runActor',\n                        },\n                    },\n                    runActor: {\n                        entry: 'clearActorDoneData',\n                        exit: stopActor('forgotPasswordActor'),\n                    },\n                },\n                on: {\n                    SIGN_IN: 'signInActor',\n                    'done.invoke.forgotPasswordActor': [\n                        { target: '#authenticator.signInActor' },\n                    ],\n                },\n            },\n            verifyUserAttributesActor: {\n                initial: 'spawnActor',\n                states: {\n                    spawnActor: {\n                        always: {\n                            actions: 'spawnVerifyUserAttributesActor',\n                            target: 'runActor',\n                        },\n                    },\n                    runActor: {\n                        entry: 'clearActorDoneData',\n                        exit: stopActor('verifyUserAttributesActor'),\n                    },\n                },\n                on: {\n                    'done.invoke.verifyUserAttributesActor': [\n                        {\n                            actions: 'setActorDoneData',\n                            target: '#authenticator.getCurrentUser',\n                        },\n                    ],\n                },\n            },\n            authenticated: {\n                initial: 'idle',\n                states: {\n                    idle: { on: { TOKEN_REFRESH: 'refreshUser' } },\n                    refreshUser: {\n                        invoke: {\n                            src: '#authenticator.getCurrentUser',\n                            onDone: { actions: 'setUser', target: 'idle' },\n                            onError: { target: '#authenticator.signOut' },\n                        },\n                    },\n                },\n                on: { SIGN_OUT: 'signOut' },\n            },\n            signOut: {\n                initial: 'spawnActor',\n                states: {\n                    spawnActor: {\n                        always: { actions: 'spawnSignOutActor', target: 'runActor' },\n                    },\n                    runActor: {\n                        entry: 'clearActorDoneData',\n                        exit: stopActor('signOutActor'),\n                    },\n                },\n                on: {\n                    'done.invoke.signOutActor': {\n                        actions: 'clearUser',\n                        target: 'setup.getConfig',\n                    },\n                },\n            },\n        },\n        on: {\n            SIGN_IN_WITH_REDIRECT: { target: '#authenticator.getCurrentUser' },\n            CHANGE: { actions: 'forwardToActor' },\n            BLUR: { actions: 'forwardToActor' },\n            SUBMIT: { actions: 'forwardToActor' },\n            FEDERATED_SIGN_IN: { actions: 'forwardToActor' },\n            RESEND: { actions: 'forwardToActor' },\n            SIGN_IN: { actions: 'forwardToActor' },\n            SKIP: { actions: 'forwardToActor' },\n        },\n    }, {\n        actions: {\n            ...ACTIONS,\n            forwardToActor: choose([\n                { cond: 'hasActor', actions: forwardTo(({ actorRef }) => actorRef) },\n            ]),\n            setActorDoneData: assign({\n                actorDoneData: (context, event) => ({\n                    challengeName: event.data.challengeName,\n                    codeDeliveryDetails: event.data.codeDeliveryDetails,\n                    missingAttributes: event.data.missingAttributes,\n                    remoteError: event.data.remoteError,\n                    username: event.data.username,\n                    step: event.data.step,\n                    totpSecretCode: event.data.totpSecretCode,\n                    unverifiedUserAttributes: event.data.unverifiedUserAttributes,\n                }),\n            }),\n            applyAmplifyConfig: assign({\n                config(context, { data: cliConfig }) {\n                    // Prefer explicitly configured settings over default CLI values\\\n                    const { loginMechanisms = cliConfig.loginMechanisms ?? [], signUpAttributes = cliConfig.signUpAttributes ?? [], socialProviders = cliConfig.socialProviders ?? [], initialState, formFields: _formFields, passwordSettings = cliConfig.passwordFormat ??\n                        {}, } = context.config;\n                    // By default, Cognito assumes `username`, so there isn't a different username attribute like `email`.\n                    // We explicitly add it as a login mechanism to be consistent with Admin UI's language.\n                    if (loginMechanisms.length === 0) {\n                        loginMechanisms.push('username');\n                    }\n                    const formFields = convertFormFields(_formFields) ?? {};\n                    return {\n                        formFields,\n                        initialState,\n                        loginMechanisms,\n                        passwordSettings,\n                        signUpAttributes,\n                        socialProviders,\n                    };\n                },\n            }),\n            spawnSignInActor: assign({\n                actorRef: (context, _) => {\n                    const { services } = context;\n                    const actor = signInActor({ services }).withContext(getActorContext(context, 'SIGN_IN'));\n                    return spawn(actor, { name: 'signInActor' });\n                },\n            }),\n            spawnSignUpActor: assign({\n                actorRef: (context, _) => {\n                    const { services } = context;\n                    const actor = signUpActor({ services }).withContext(getActorContext(context, 'SIGN_UP'));\n                    return spawn(actor, { name: 'signUpActor' });\n                },\n            }),\n            spawnForgotPasswordActor: assign({\n                actorRef: (context, _) => {\n                    const { services } = context;\n                    const actor = forgotPasswordActor({ services }).withContext(getActorContext(context, 'FORGOT_PASSWORD'));\n                    return spawn(actor, { name: 'forgotPasswordActor' });\n                },\n            }),\n            spawnVerifyUserAttributesActor: assign({\n                actorRef: (context) => {\n                    const actor = verifyUserAttributesActor().withContext(getActorContext(context));\n                    return spawn(actor, { name: 'verifyUserAttributesActor' });\n                },\n            }),\n            spawnSignOutActor: assign({\n                actorRef: (context) => {\n                    const actor = signOutActor().withContext({ user: context?.user });\n                    return spawn(actor, { name: 'signOutActor' });\n                },\n            }),\n            configure: assign((_, event) => {\n                const { services: customServices, ...config } = !isEmptyObject(overrideConfigServices)\n                    ? overrideConfigServices\n                    : event.data ?? {};\n                return {\n                    services: { ...defaultServices, ...customServices },\n                    config,\n                };\n            }),\n            setHasSetup: assign({ hasSetup: true }),\n        },\n        guards: {\n            ...GUARDS,\n            hasActor: ({ actorRef }) => !!actorRef,\n            isInitialStateSignUp: ({ config }) => config.initialState === 'signUp',\n            isInitialStateResetPassword: ({ config }) => config.initialState === 'forgotPassword',\n            shouldSetup: ({ hasSetup }) => !hasSetup,\n            hasUser: ({ user }) => {\n                return !!user;\n            },\n        },\n        services: {\n            getAmplifyConfig: ({ services }) => services.getAmplifyConfig(),\n            handleGetCurrentUser: ({ services }) => services.getCurrentUser(),\n        },\n    });\n}\nfunction convertFormFields(formFields) {\n    if (formFields) {\n        Object.keys(formFields).forEach((component) => {\n            Object.keys(formFields[component]).forEach((inputName) => {\n                let ff = formFields[component][inputName];\n                ff.required = ff.isRequired;\n            });\n        });\n    }\n    return formFields;\n}\n\nexport { createAuthenticatorMachine };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}