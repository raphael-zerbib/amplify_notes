{"ast":null,"code":"import { graphQLOperationsInfo } from '../APIClient.mjs';\nimport { listFactory } from '../operations/list.mjs';\nimport { indexQueryFactory } from '../operations/indexQuery.mjs';\nimport { getFactory } from '../operations/get.mjs';\nimport { getSecondaryIndexesFromSchemaModel } from '../clientUtils.mjs';\nfunction generateModelsProperty(client, params) {\n  const models = {};\n  const config = params.config;\n  const useContext = params.amplify === null;\n  if (!config) {\n    throw new Error('generateModelsProperty cannot retrieve Amplify config');\n  }\n  if (!config.API?.GraphQL) {\n    return {};\n  }\n  const modelIntrospection = config.API.GraphQL.modelIntrospection;\n  if (!modelIntrospection) {\n    return {};\n  }\n  const SSR_UNSUPORTED_OPS = ['ONCREATE', 'ONUPDATE', 'ONDELETE', 'OBSERVE_QUERY'];\n  for (const model of Object.values(modelIntrospection.models)) {\n    const {\n      name\n    } = model;\n    models[name] = {};\n    Object.entries(graphQLOperationsInfo).forEach(([key, {\n      operationPrefix\n    }]) => {\n      const operation = key;\n      // subscriptions are not supported in SSR\n      if (SSR_UNSUPORTED_OPS.includes(operation)) return;\n      if (operation === 'LIST') {\n        models[name][operationPrefix] = listFactory(client, modelIntrospection, model, useContext);\n      } else {\n        models[name][operationPrefix] = getFactory(client, modelIntrospection, model, operation, useContext);\n      }\n    });\n    const secondaryIdxs = getSecondaryIndexesFromSchemaModel(model);\n    for (const idx of secondaryIdxs) {\n      models[name][idx.queryField] = indexQueryFactory(client, modelIntrospection, model, idx);\n    }\n  }\n  return models;\n}\nexport { generateModelsProperty };","map":{"version":3,"names":["generateModelsProperty","client","params","models","config","useContext","amplify","Error","API","GraphQL","modelIntrospection","SSR_UNSUPORTED_OPS","model","Object","values","name","entries","graphQLOperationsInfo","forEach","key","operationPrefix","operation","includes","listFactory","getFactory","secondaryIdxs","getSecondaryIndexesFromSchemaModel","idx","queryField","indexQueryFactory"],"sources":["/Users/raphaperso/Documents/Hub/FreeCodeCamp/amplify_notes/node_modules/@aws-amplify/api-graphql/src/internals/server/generateModelsProperty.ts"],"sourcesContent":["import { graphQLOperationsInfo } from '../APIClient';\nimport { listFactory } from '../operations/list';\nimport { indexQueryFactory } from '../operations/indexQuery';\nimport { getFactory } from '../operations/get';\nimport { getSecondaryIndexesFromSchemaModel } from '../clientUtils';\nexport function generateModelsProperty(client, params) {\n    const models = {};\n    const config = params.config;\n    const useContext = params.amplify === null;\n    if (!config) {\n        throw new Error('generateModelsProperty cannot retrieve Amplify config');\n    }\n    if (!config.API?.GraphQL) {\n        return {};\n    }\n    const modelIntrospection = config.API.GraphQL.modelIntrospection;\n    if (!modelIntrospection) {\n        return {};\n    }\n    const SSR_UNSUPORTED_OPS = [\n        'ONCREATE',\n        'ONUPDATE',\n        'ONDELETE',\n        'OBSERVE_QUERY',\n    ];\n    for (const model of Object.values(modelIntrospection.models)) {\n        const { name } = model;\n        models[name] = {};\n        Object.entries(graphQLOperationsInfo).forEach(([key, { operationPrefix }]) => {\n            const operation = key;\n            // subscriptions are not supported in SSR\n            if (SSR_UNSUPORTED_OPS.includes(operation))\n                return;\n            if (operation === 'LIST') {\n                models[name][operationPrefix] = listFactory(client, modelIntrospection, model, useContext);\n            }\n            else {\n                models[name][operationPrefix] = getFactory(client, modelIntrospection, model, operation, useContext);\n            }\n        });\n        const secondaryIdxs = getSecondaryIndexesFromSchemaModel(model);\n        for (const idx of secondaryIdxs) {\n            models[name][idx.queryField] = indexQueryFactory(client, modelIntrospection, model, idx);\n        }\n    }\n    return models;\n}\n"],"mappings":";;;;;AAKO,SAASA,sBAAsBA,CAACC,MAAM,EAAEC,MAAM,EAAE;EACnD,MAAMC,MAAM,GAAG,EAAE;EACjB,MAAMC,MAAM,GAAGF,MAAM,CAACE,MAAM;EAC5B,MAAMC,UAAU,GAAGH,MAAM,CAACI,OAAO,KAAK,IAAI;EAC1C,IAAI,CAACF,MAAM,EAAE;IACT,MAAM,IAAIG,KAAK,CAAC,uDAAuD,CAAC;EAChF;EACI,IAAI,CAACH,MAAM,CAACI,GAAG,EAAEC,OAAO,EAAE;IACtB,OAAO,EAAE;EACjB;EACI,MAAMC,kBAAkB,GAAGN,MAAM,CAACI,GAAG,CAACC,OAAO,CAACC,kBAAkB;EAChE,IAAI,CAACA,kBAAkB,EAAE;IACrB,OAAO,EAAE;EACjB;EACI,MAAMC,kBAAkB,GAAG,CACvB,UAAU,EACV,UAAU,EACV,UAAU,EACV,eAAe,CAClB;EACD,KAAK,MAAMC,KAAK,IAAIC,MAAM,CAACC,MAAM,CAACJ,kBAAkB,CAACP,MAAM,CAAC,EAAE;IAC1D,MAAM;MAAEY;IAAI,CAAE,GAAGH,KAAK;IACtBT,MAAM,CAACY,IAAI,CAAC,GAAG,EAAE;IACjBF,MAAM,CAACG,OAAO,CAACC,qBAAqB,CAAC,CAACC,OAAO,CAAC,CAAC,CAACC,GAAG,EAAE;MAAEC;IAAe,CAAE,CAAC,KAAK;MAC1E,MAAMC,SAAS,GAAGF,GAAG;MACjC;MACY,IAAIR,kBAAkB,CAACW,QAAQ,CAACD,SAAS,CAAC,EACtC;MACJ,IAAIA,SAAS,KAAK,MAAM,EAAE;QACtBlB,MAAM,CAACY,IAAI,CAAC,CAACK,eAAe,CAAC,GAAGG,WAAW,CAACtB,MAAM,EAAES,kBAAkB,EAAEE,KAAK,EAAEP,UAAU,CAAC;MAC1G,CAAa,MACI;QACDF,MAAM,CAACY,IAAI,CAAC,CAACK,eAAe,CAAC,GAAGI,UAAU,CAACvB,MAAM,EAAES,kBAAkB,EAAEE,KAAK,EAAES,SAAS,EAAEhB,UAAU,CAAC;MACpH;IACA,CAAS,CAAC;IACF,MAAMoB,aAAa,GAAGC,kCAAkC,CAACd,KAAK,CAAC;IAC/D,KAAK,MAAMe,GAAG,IAAIF,aAAa,EAAE;MAC7BtB,MAAM,CAACY,IAAI,CAAC,CAACY,GAAG,CAACC,UAAU,CAAC,GAAGC,iBAAiB,CAAC5B,MAAM,EAAES,kBAAkB,EAAEE,KAAK,EAAEe,GAAG,CAAC;IACpG;EACA;EACI,OAAOxB,MAAM;AACjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}