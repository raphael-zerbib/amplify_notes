{"ast":null,"code":"const SIGN_IN_STEP_MFA_CONFIRMATION = ['CONFIRM_SIGN_IN_WITH_SMS_CODE', 'CONFIRM_SIGN_IN_WITH_TOTP_CODE'];\n// response next step guards\nconst shouldConfirmSignInWithNewPassword = (_, _ref) => {\n  let {\n    data\n  } = _ref;\n  return (data === null || data === void 0 ? void 0 : data.nextStep.signInStep) === 'CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED';\n};\nconst shouldResetPasswordFromSignIn = (_, _ref2) => {\n  var _data$nextStep;\n  let {\n    data\n  } = _ref2;\n  return (data === null || data === void 0 || (_data$nextStep = data.nextStep) === null || _data$nextStep === void 0 ? void 0 : _data$nextStep.signInStep) === 'RESET_PASSWORD';\n};\nconst shouldConfirmSignUpFromSignIn = (_, _ref3) => {\n  let {\n    data\n  } = _ref3;\n  return (data === null || data === void 0 ? void 0 : data.nextStep.signInStep) === 'CONFIRM_SIGN_UP';\n};\nconst shouldAutoSignIn = (_, _ref4) => {\n  let {\n    data\n  } = _ref4;\n  return (data === null || data === void 0 ? void 0 : data.nextStep.signUpStep) === 'COMPLETE_AUTO_SIGN_IN';\n};\nconst hasCompletedSignIn = (_, _ref5) => {\n  let {\n    data\n  } = _ref5;\n  return (data === null || data === void 0 ? void 0 : data.nextStep.signInStep) === 'DONE';\n};\nconst hasCompletedSignUp = (_, _ref6) => {\n  let {\n    data\n  } = _ref6;\n  return (data === null || data === void 0 ? void 0 : data.nextStep.signUpStep) === 'DONE';\n};\nconst hasCompletedResetPassword = (_, _ref7) => {\n  let {\n    data\n  } = _ref7;\n  return (data === null || data === void 0 ? void 0 : data.nextStep.resetPasswordStep) === 'DONE';\n};\n// actor done guards read `step` from actor exit event\nconst hasCompletedAttributeConfirmation = (_, _ref8) => {\n  let {\n    data\n  } = _ref8;\n  return (data === null || data === void 0 ? void 0 : data.step) === 'CONFIRM_ATTRIBUTE_COMPLETE';\n};\nconst isConfirmUserAttributeStep = (_, _ref9) => {\n  let {\n    data\n  } = _ref9;\n  return (data === null || data === void 0 ? void 0 : data.step) === 'CONFIRM_ATTRIBUTE_WITH_CODE';\n};\nconst isShouldConfirmUserAttributeStep = (_, _ref10) => {\n  let {\n    data\n  } = _ref10;\n  return (data === null || data === void 0 ? void 0 : data.step) === 'SHOULD_CONFIRM_USER_ATTRIBUTE';\n};\nconst isResetPasswordStep = (_, _ref11) => {\n  let {\n    data\n  } = _ref11;\n  return (data === null || data === void 0 ? void 0 : data.step) === 'RESET_PASSWORD';\n};\nconst isConfirmSignUpStep = (_, _ref12) => {\n  let {\n    data\n  } = _ref12;\n  return (data === null || data === void 0 ? void 0 : data.step) === 'CONFIRM_SIGN_UP';\n};\n// actor entry guards read `step` from actor context\nconst shouldConfirmSignIn = _ref13 => {\n  let {\n    step\n  } = _ref13;\n  return SIGN_IN_STEP_MFA_CONFIRMATION.includes(step);\n};\nconst shouldSetupTotp = _ref14 => {\n  let {\n    step\n  } = _ref14;\n  return step === 'CONTINUE_SIGN_IN_WITH_TOTP_SETUP';\n};\nconst shouldResetPassword = _ref15 => {\n  let {\n    step\n  } = _ref15;\n  return step === 'RESET_PASSWORD';\n};\nconst shouldConfirmResetPassword = _ref16 => {\n  let {\n    step\n  } = _ref16;\n  return step === 'CONFIRM_RESET_PASSWORD_WITH_CODE';\n};\nconst shouldConfirmSignUp = _ref17 => {\n  let {\n    step\n  } = _ref17;\n  return step === 'CONFIRM_SIGN_UP';\n};\n// miscellaneous guards\nconst shouldVerifyAttribute = (_, _ref18) => {\n  let {\n    data\n  } = _ref18;\n  const {\n    phone_number_verified,\n    email_verified\n  } = data;\n  // email/phone_verified is returned as a string\n  const emailNotVerified = email_verified === undefined || email_verified === 'false';\n  const phoneNotVerified = phone_number_verified === undefined || phone_number_verified === 'false';\n  // only request verification if both email and phone are not verified\n  return emailNotVerified && phoneNotVerified;\n};\n/**\n * This guard covers an edge case that exists in the current state of the UI.\n * As of now, our ConfirmSignUp screen only supports showing an input for a\n * confirmation code. However, a Cognito UserPool can instead verify users\n * through a link that gets emailed to them. If a user verifies through the\n * link and then they click on the \"Resend Code\" button, they will get an error\n * saying that the user has already been confirmed. If we encounter that error,\n * we want to just funnel them through the rest of the flow. In the future, we will\n * want to update our UI to support both confirmation codes and links.\n *\n * https://github.com/aws-amplify/amplify-ui/issues/219\n */\nconst isUserAlreadyConfirmed = (_, _ref19) => {\n  let {\n    data\n  } = _ref19;\n  return data.message === 'User is already confirmed.';\n};\nconst GUARDS = {\n  hasCompletedAttributeConfirmation,\n  hasCompletedResetPassword,\n  hasCompletedSignIn,\n  hasCompletedSignUp,\n  isConfirmSignUpStep,\n  isConfirmUserAttributeStep,\n  isResetPasswordStep,\n  isShouldConfirmUserAttributeStep,\n  isUserAlreadyConfirmed,\n  shouldAutoSignIn,\n  shouldConfirmResetPassword,\n  shouldConfirmSignIn,\n  shouldConfirmSignInWithNewPassword,\n  shouldConfirmSignUp,\n  shouldConfirmSignUpFromSignIn,\n  shouldResetPassword,\n  shouldResetPasswordFromSignIn,\n  shouldSetupTotp,\n  shouldVerifyAttribute\n};\nexport { GUARDS as default };","map":{"version":3,"names":["SIGN_IN_STEP_MFA_CONFIRMATION","shouldConfirmSignInWithNewPassword","_","_ref","data","nextStep","signInStep","shouldResetPasswordFromSignIn","_ref2","_data$nextStep","shouldConfirmSignUpFromSignIn","_ref3","shouldAutoSignIn","_ref4","signUpStep","hasCompletedSignIn","_ref5","hasCompletedSignUp","_ref6","hasCompletedResetPassword","_ref7","resetPasswordStep","hasCompletedAttributeConfirmation","_ref8","step","isConfirmUserAttributeStep","_ref9","isShouldConfirmUserAttributeStep","_ref10","isResetPasswordStep","_ref11","isConfirmSignUpStep","_ref12","shouldConfirmSignIn","_ref13","includes","shouldSetupTotp","_ref14","shouldResetPassword","_ref15","shouldConfirmResetPassword","_ref16","shouldConfirmSignUp","_ref17","shouldVerifyAttribute","_ref18","phone_number_verified","email_verified","emailNotVerified","undefined","phoneNotVerified","isUserAlreadyConfirmed","_ref19","message","GUARDS","default"],"sources":["/Users/raphaperso/Documents/Hub/amplify_test/notes/node_modules/@aws-amplify/ui/dist/esm/machines/authenticator/guards.mjs"],"sourcesContent":["const SIGN_IN_STEP_MFA_CONFIRMATION = [\n    'CONFIRM_SIGN_IN_WITH_SMS_CODE',\n    'CONFIRM_SIGN_IN_WITH_TOTP_CODE',\n];\n// response next step guards\nconst shouldConfirmSignInWithNewPassword = (_, { data }) => data?.nextStep.signInStep ===\n    'CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED';\nconst shouldResetPasswordFromSignIn = (_, { data }) => data?.nextStep?.signInStep === 'RESET_PASSWORD';\nconst shouldConfirmSignUpFromSignIn = (_, { data }) => data?.nextStep.signInStep === 'CONFIRM_SIGN_UP';\nconst shouldAutoSignIn = (_, { data }) => data?.nextStep.signUpStep === 'COMPLETE_AUTO_SIGN_IN';\nconst hasCompletedSignIn = (_, { data }) => data?.nextStep.signInStep === 'DONE';\nconst hasCompletedSignUp = (_, { data }) => data?.nextStep.signUpStep === 'DONE';\nconst hasCompletedResetPassword = (_, { data }) => data?.nextStep.resetPasswordStep === 'DONE';\n// actor done guards read `step` from actor exit event\nconst hasCompletedAttributeConfirmation = (_, { data }) => data?.step === 'CONFIRM_ATTRIBUTE_COMPLETE';\nconst isConfirmUserAttributeStep = (_, { data }) => data?.step === 'CONFIRM_ATTRIBUTE_WITH_CODE';\nconst isShouldConfirmUserAttributeStep = (_, { data }) => data?.step === 'SHOULD_CONFIRM_USER_ATTRIBUTE';\nconst isResetPasswordStep = (_, { data }) => data?.step === 'RESET_PASSWORD';\nconst isConfirmSignUpStep = (_, { data }) => data?.step === 'CONFIRM_SIGN_UP';\n// actor entry guards read `step` from actor context\nconst shouldConfirmSignIn = ({ step }) => SIGN_IN_STEP_MFA_CONFIRMATION.includes(step);\nconst shouldSetupTotp = ({ step }) => step === 'CONTINUE_SIGN_IN_WITH_TOTP_SETUP';\nconst shouldResetPassword = ({ step }) => step === 'RESET_PASSWORD';\nconst shouldConfirmResetPassword = ({ step }) => step === 'CONFIRM_RESET_PASSWORD_WITH_CODE';\nconst shouldConfirmSignUp = ({ step }) => step === 'CONFIRM_SIGN_UP';\n// miscellaneous guards\nconst shouldVerifyAttribute = (_, { data }) => {\n    const { phone_number_verified, email_verified } = data;\n    // email/phone_verified is returned as a string\n    const emailNotVerified = email_verified === undefined || email_verified === 'false';\n    const phoneNotVerified = phone_number_verified === undefined || phone_number_verified === 'false';\n    // only request verification if both email and phone are not verified\n    return emailNotVerified && phoneNotVerified;\n};\n/**\n * This guard covers an edge case that exists in the current state of the UI.\n * As of now, our ConfirmSignUp screen only supports showing an input for a\n * confirmation code. However, a Cognito UserPool can instead verify users\n * through a link that gets emailed to them. If a user verifies through the\n * link and then they click on the \"Resend Code\" button, they will get an error\n * saying that the user has already been confirmed. If we encounter that error,\n * we want to just funnel them through the rest of the flow. In the future, we will\n * want to update our UI to support both confirmation codes and links.\n *\n * https://github.com/aws-amplify/amplify-ui/issues/219\n */\nconst isUserAlreadyConfirmed = (_, { data }) => data.message === 'User is already confirmed.';\nconst GUARDS = {\n    hasCompletedAttributeConfirmation,\n    hasCompletedResetPassword,\n    hasCompletedSignIn,\n    hasCompletedSignUp,\n    isConfirmSignUpStep,\n    isConfirmUserAttributeStep,\n    isResetPasswordStep,\n    isShouldConfirmUserAttributeStep,\n    isUserAlreadyConfirmed,\n    shouldAutoSignIn,\n    shouldConfirmResetPassword,\n    shouldConfirmSignIn,\n    shouldConfirmSignInWithNewPassword,\n    shouldConfirmSignUp,\n    shouldConfirmSignUpFromSignIn,\n    shouldResetPassword,\n    shouldResetPasswordFromSignIn,\n    shouldSetupTotp,\n    shouldVerifyAttribute,\n};\n\nexport { GUARDS as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}