{"ast":null,"code":"import { Amplify } from 'aws-amplify';\nimport 'aws-amplify/utils';\nimport '@aws-amplify/core/internals/utils';\nimport '../../utils/setUserAgent/constants.mjs';\nimport '../../types/authenticator/user.mjs';\nimport '../../types/authenticator/attributes.mjs';\nimport { hasSpecialChars } from '../authenticator/utils.mjs';\n\n// gets password requirement from Amplify.configure data\nconst getPasswordRequirement = () => {\n  var _config$Auth, _passwordSettings$req, _passwordSettings$req2, _passwordSettings$req3, _passwordSettings$req4;\n  const config = Amplify.getConfig();\n  const passwordSettings = config === null || config === void 0 || (_config$Auth = config.Auth) === null || _config$Auth === void 0 ? void 0 : _config$Auth.Cognito.passwordFormat;\n  if (!passwordSettings) {\n    return null;\n  }\n  return {\n    minLength: passwordSettings.minLength,\n    needsLowerCase: (_passwordSettings$req = passwordSettings.requireLowercase) !== null && _passwordSettings$req !== void 0 ? _passwordSettings$req : false,\n    needsUpperCase: (_passwordSettings$req2 = passwordSettings.requireUppercase) !== null && _passwordSettings$req2 !== void 0 ? _passwordSettings$req2 : false,\n    needsNumber: (_passwordSettings$req3 = passwordSettings.requireNumbers) !== null && _passwordSettings$req3 !== void 0 ? _passwordSettings$req3 : false,\n    needsSpecialChar: (_passwordSettings$req4 = passwordSettings.requireSpecialCharacters) !== null && _passwordSettings$req4 !== void 0 ? _passwordSettings$req4 : false\n  };\n};\nconst getHasMinLength = minLength => ({\n  validationMode: 'onTouched',\n  validator: field => field.length >= minLength,\n  message: \"Password must have at least \".concat(minLength, \" characters\")\n});\nconst hasLowerCase = {\n  validationMode: 'onTouched',\n  validator: field => /[a-z]/.test(field),\n  message: 'Password must have lower case letters'\n};\nconst hasUpperCase = {\n  validationMode: 'onTouched',\n  validator: field => /[A-Z]/.test(field),\n  message: 'Password must have upper case letters'\n};\nconst hasNumber = {\n  validationMode: 'onTouched',\n  validator: field => /[0-9]/.test(field),\n  message: 'Password must have numbers'\n};\nconst hasSpecialChar = {\n  validationMode: 'onTouched',\n  validator: field => hasSpecialChars(field),\n  message: 'Password must have special characters'\n};\nconst getMatchesConfirmPassword = password => {\n  return {\n    validationMode: 'onTouched',\n    validator: confirmPassword => password === confirmPassword,\n    message: 'Your passwords must match'\n  };\n};\nconst getDefaultPasswordValidators = () => {\n  const requirement = getPasswordRequirement();\n  if (!requirement) return [];\n  const validators = [];\n  const {\n    minLength,\n    needsLowerCase,\n    needsUpperCase,\n    needsNumber,\n    needsSpecialChar\n  } = requirement;\n  if (minLength) {\n    validators.push(getHasMinLength(minLength));\n  }\n  if (needsLowerCase) {\n    validators.push(hasLowerCase);\n  }\n  if (needsUpperCase) {\n    validators.push(hasUpperCase);\n  }\n  if (needsNumber) {\n    validators.push(hasNumber);\n  }\n  if (needsSpecialChar) {\n    validators.push(hasSpecialChar);\n  }\n  return validators;\n};\nconst getDefaultConfirmPasswordValidators = password => {\n  return [getMatchesConfirmPassword(password)];\n};\n/*\n * `shouldValidate` determines whether validator should be run, based on validation mode,\n * input event type, and whether it has been blurred yet.\n */\nconst shouldValidate = _ref => {\n  let {\n    validationMode,\n    eventType,\n    hasBlurred\n  } = _ref;\n  switch (validationMode) {\n    case 'onBlur':\n      {\n        // only run validator on blur event\n        return eventType === 'blur';\n      }\n    case 'onChange':\n      {\n        // only run validator on change event\n        return eventType === 'change';\n      }\n    case 'onTouched':\n      {\n        /**\n         * run validator on first blur event, and then every subsequent\n         * blur/change event.\n         */\n        return eventType === 'blur' || hasBlurred;\n      }\n  }\n};\n// `runFieldValidator` runs all validators, and returns error messages.\nconst runFieldValidators = _ref2 => {\n  let {\n    value,\n    validators,\n    eventType,\n    hasBlurred\n  } = _ref2;\n  if (!value) return [];\n  return validators.reduce((prevErrors, validatorSpec) => {\n    const {\n      validator,\n      validationMode,\n      message\n    } = validatorSpec;\n    if (shouldValidate({\n      validationMode,\n      eventType,\n      hasBlurred\n    })) {\n      const hasError = !validator(value);\n      return hasError ? [...prevErrors, message] : prevErrors;\n    }\n    return prevErrors;\n  }, []);\n};\nexport { getDefaultConfirmPasswordValidators, getDefaultPasswordValidators, getHasMinLength, getMatchesConfirmPassword, getPasswordRequirement, hasLowerCase, hasNumber, hasSpecialChar, hasUpperCase, runFieldValidators, shouldValidate };","map":{"version":3,"names":["Amplify","hasSpecialChars","getPasswordRequirement","_config$Auth","_passwordSettings$req","_passwordSettings$req2","_passwordSettings$req3","_passwordSettings$req4","config","getConfig","passwordSettings","Auth","Cognito","passwordFormat","minLength","needsLowerCase","requireLowercase","needsUpperCase","requireUppercase","needsNumber","requireNumbers","needsSpecialChar","requireSpecialCharacters","getHasMinLength","validationMode","validator","field","length","message","concat","hasLowerCase","test","hasUpperCase","hasNumber","hasSpecialChar","getMatchesConfirmPassword","password","confirmPassword","getDefaultPasswordValidators","requirement","validators","push","getDefaultConfirmPasswordValidators","shouldValidate","_ref","eventType","hasBlurred","runFieldValidators","_ref2","value","reduce","prevErrors","validatorSpec","hasError"],"sources":["/Users/raphaperso/Documents/Hub/amplify_test/notes/node_modules/@aws-amplify/ui/dist/esm/helpers/accountSettings/validator.mjs"],"sourcesContent":["import { Amplify } from 'aws-amplify';\nimport 'aws-amplify/utils';\nimport '@aws-amplify/core/internals/utils';\nimport '../../utils/setUserAgent/constants.mjs';\nimport '../../types/authenticator/user.mjs';\nimport '../../types/authenticator/attributes.mjs';\nimport { hasSpecialChars } from '../authenticator/utils.mjs';\n\n// gets password requirement from Amplify.configure data\nconst getPasswordRequirement = () => {\n    const config = Amplify.getConfig();\n    const passwordSettings = config?.Auth?.Cognito\n        .passwordFormat;\n    if (!passwordSettings) {\n        return null;\n    }\n    return {\n        minLength: passwordSettings.minLength,\n        needsLowerCase: passwordSettings.requireLowercase ?? false,\n        needsUpperCase: passwordSettings.requireUppercase ?? false,\n        needsNumber: passwordSettings.requireNumbers ?? false,\n        needsSpecialChar: passwordSettings.requireSpecialCharacters ?? false,\n    };\n};\nconst getHasMinLength = (minLength) => ({\n    validationMode: 'onTouched',\n    validator: (field) => field.length >= minLength,\n    message: `Password must have at least ${minLength} characters`,\n});\nconst hasLowerCase = {\n    validationMode: 'onTouched',\n    validator: (field) => /[a-z]/.test(field),\n    message: 'Password must have lower case letters',\n};\nconst hasUpperCase = {\n    validationMode: 'onTouched',\n    validator: (field) => /[A-Z]/.test(field),\n    message: 'Password must have upper case letters',\n};\nconst hasNumber = {\n    validationMode: 'onTouched',\n    validator: (field) => /[0-9]/.test(field),\n    message: 'Password must have numbers',\n};\nconst hasSpecialChar = {\n    validationMode: 'onTouched',\n    validator: (field) => hasSpecialChars(field),\n    message: 'Password must have special characters',\n};\nconst getMatchesConfirmPassword = (password) => {\n    return {\n        validationMode: 'onTouched',\n        validator: (confirmPassword) => password === confirmPassword,\n        message: 'Your passwords must match',\n    };\n};\nconst getDefaultPasswordValidators = () => {\n    const requirement = getPasswordRequirement();\n    if (!requirement)\n        return [];\n    const validators = [];\n    const { minLength, needsLowerCase, needsUpperCase, needsNumber, needsSpecialChar, } = requirement;\n    if (minLength) {\n        validators.push(getHasMinLength(minLength));\n    }\n    if (needsLowerCase) {\n        validators.push(hasLowerCase);\n    }\n    if (needsUpperCase) {\n        validators.push(hasUpperCase);\n    }\n    if (needsNumber) {\n        validators.push(hasNumber);\n    }\n    if (needsSpecialChar) {\n        validators.push(hasSpecialChar);\n    }\n    return validators;\n};\nconst getDefaultConfirmPasswordValidators = (password) => {\n    return [getMatchesConfirmPassword(password)];\n};\n/*\n * `shouldValidate` determines whether validator should be run, based on validation mode,\n * input event type, and whether it has been blurred yet.\n */\nconst shouldValidate = ({ validationMode, eventType, hasBlurred, }) => {\n    switch (validationMode) {\n        case 'onBlur': {\n            // only run validator on blur event\n            return eventType === 'blur';\n        }\n        case 'onChange': {\n            // only run validator on change event\n            return eventType === 'change';\n        }\n        case 'onTouched': {\n            /**\n             * run validator on first blur event, and then every subsequent\n             * blur/change event.\n             */\n            return eventType === 'blur' || hasBlurred;\n        }\n    }\n};\n// `runFieldValidator` runs all validators, and returns error messages.\nconst runFieldValidators = ({ value, validators, eventType, hasBlurred, }) => {\n    if (!value)\n        return [];\n    return validators.reduce((prevErrors, validatorSpec) => {\n        const { validator, validationMode, message } = validatorSpec;\n        if (shouldValidate({ validationMode, eventType, hasBlurred })) {\n            const hasError = !validator(value);\n            return hasError ? [...prevErrors, message] : prevErrors;\n        }\n        return prevErrors;\n    }, []);\n};\n\nexport { getDefaultConfirmPasswordValidators, getDefaultPasswordValidators, getHasMinLength, getMatchesConfirmPassword, getPasswordRequirement, hasLowerCase, hasNumber, hasSpecialChar, hasUpperCase, runFieldValidators, shouldValidate };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}