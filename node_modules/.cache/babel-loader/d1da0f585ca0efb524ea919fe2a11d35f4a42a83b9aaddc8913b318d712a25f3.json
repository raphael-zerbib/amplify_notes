{"ast":null,"code":"import * as React from 'react';\nimport { isFunction } from '@aws-amplify/ui';\nimport { ESCAPE_KEY, ENTER_KEY } from '../shared/constants.mjs';\nimport { useComposeRefsCallback } from '../../hooks/useComposeRefsCallback.mjs';\nconst DEFAULT_KEYS = new Set([ESCAPE_KEY, ENTER_KEY]);\nconst useSearchField = _ref => {\n  let {\n    defaultValue = '',\n    value,\n    onChange,\n    onClear,\n    onSubmit,\n    externalRef\n  } = _ref;\n  const isControlled = value !== undefined;\n  const [internalValue, setInternalValue] = React.useState(defaultValue);\n  const composedValue = isControlled ? value : internalValue;\n  const internalRef = React.useRef(null);\n  const composedRefs = useComposeRefsCallback({\n    externalRef,\n    internalRef\n  });\n  const onClearHandler = React.useCallback(() => {\n    var _internalRef$current;\n    if (!isControlled) {\n      setInternalValue('');\n    }\n    internalRef === null || internalRef === void 0 || (_internalRef$current = internalRef.current) === null || _internalRef$current === void 0 || _internalRef$current.focus();\n    if (isFunction(onClear)) {\n      onClear();\n    }\n  }, [isControlled, setInternalValue, onClear]);\n  const onSubmitHandler = React.useCallback(value => {\n    if (isFunction(onSubmit)) {\n      onSubmit(value);\n    }\n  }, [onSubmit]);\n  const onKeyDown = React.useCallback(event => {\n    const {\n      key\n    } = event;\n    if (!DEFAULT_KEYS.has(key)) {\n      return;\n    }\n    event.preventDefault();\n    if (key === ESCAPE_KEY) {\n      onClearHandler();\n    } else if (key === ENTER_KEY) {\n      onSubmitHandler(composedValue);\n    }\n  }, [composedValue, onClearHandler, onSubmitHandler]);\n  const handleOnChange = React.useCallback(event => {\n    if (!isControlled) {\n      setInternalValue(event.target.value);\n    }\n    if (isFunction(onChange)) {\n      onChange(event);\n    }\n  }, [isControlled, onChange, setInternalValue]);\n  const onClick = React.useCallback(() => {\n    onSubmitHandler(composedValue);\n  }, [onSubmitHandler, composedValue]);\n  return {\n    composedValue,\n    onClearHandler,\n    onKeyDown,\n    onClick,\n    handleOnChange,\n    composedRefs\n  };\n};\nexport { useSearchField };","map":{"version":3,"names":["React","isFunction","ESCAPE_KEY","ENTER_KEY","useComposeRefsCallback","DEFAULT_KEYS","Set","useSearchField","_ref","defaultValue","value","onChange","onClear","onSubmit","externalRef","isControlled","undefined","internalValue","setInternalValue","useState","composedValue","internalRef","useRef","composedRefs","onClearHandler","useCallback","_internalRef$current","current","focus","onSubmitHandler","onKeyDown","event","key","has","preventDefault","handleOnChange","target","onClick"],"sources":["/Users/raphaperso/Documents/Hub/amplify_test/notes/node_modules/@aws-amplify/ui-react/dist/esm/primitives/SearchField/useSearchField.mjs"],"sourcesContent":["import * as React from 'react';\nimport { isFunction } from '@aws-amplify/ui';\nimport { ESCAPE_KEY, ENTER_KEY } from '../shared/constants.mjs';\nimport { useComposeRefsCallback } from '../../hooks/useComposeRefsCallback.mjs';\n\nconst DEFAULT_KEYS = new Set([ESCAPE_KEY, ENTER_KEY]);\nconst useSearchField = ({ defaultValue = '', value, onChange, onClear, onSubmit, externalRef, }) => {\n    const isControlled = value !== undefined;\n    const [internalValue, setInternalValue] = React.useState(defaultValue);\n    const composedValue = isControlled ? value : internalValue;\n    const internalRef = React.useRef(null);\n    const composedRefs = useComposeRefsCallback({\n        externalRef,\n        internalRef,\n    });\n    const onClearHandler = React.useCallback(() => {\n        if (!isControlled) {\n            setInternalValue('');\n        }\n        internalRef?.current?.focus();\n        if (isFunction(onClear)) {\n            onClear();\n        }\n    }, [isControlled, setInternalValue, onClear]);\n    const onSubmitHandler = React.useCallback((value) => {\n        if (isFunction(onSubmit)) {\n            onSubmit(value);\n        }\n    }, [onSubmit]);\n    const onKeyDown = React.useCallback((event) => {\n        const { key } = event;\n        if (!DEFAULT_KEYS.has(key)) {\n            return;\n        }\n        event.preventDefault();\n        if (key === ESCAPE_KEY) {\n            onClearHandler();\n        }\n        else if (key === ENTER_KEY) {\n            onSubmitHandler(composedValue);\n        }\n    }, [composedValue, onClearHandler, onSubmitHandler]);\n    const handleOnChange = React.useCallback((event) => {\n        if (!isControlled) {\n            setInternalValue(event.target.value);\n        }\n        if (isFunction(onChange)) {\n            onChange(event);\n        }\n    }, [isControlled, onChange, setInternalValue]);\n    const onClick = React.useCallback(() => {\n        onSubmitHandler(composedValue);\n    }, [onSubmitHandler, composedValue]);\n    return {\n        composedValue,\n        onClearHandler,\n        onKeyDown,\n        onClick,\n        handleOnChange,\n        composedRefs,\n    };\n};\n\nexport { useSearchField };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}