{"ast":null,"code":"import { Amplify } from '@aws-amplify/core';\nimport { unauthenticatedHandler, getRetryDecider, parseJsonError, jitteredBackoff, getDnsSuffix } from '@aws-amplify/core/internals/aws-client-utils';\nimport { getAmplifyUserAgent, AmplifyUrl } from '@aws-amplify/core/internals/utils';\nimport { composeTransferHandler } from '@aws-amplify/core/internals/aws-client-utils/composers';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * The service name used to sign requests if the API requires authentication.\n */\nconst SERVICE_NAME = 'cognito-idp';\n/**\n * The endpoint resolver function that returns the endpoint URL for a given region.\n */\nconst endpointResolver = _ref => {\n  var _Amplify$getConfig$Au;\n  let {\n    region\n  } = _ref;\n  const authConfig = (_Amplify$getConfig$Au = Amplify.getConfig().Auth) === null || _Amplify$getConfig$Au === void 0 ? void 0 : _Amplify$getConfig$Au.Cognito;\n  const customURL = authConfig === null || authConfig === void 0 ? void 0 : authConfig.userPoolEndpoint;\n  const defaultURL = new AmplifyUrl(\"https://\".concat(SERVICE_NAME, \".\").concat(region, \".\").concat(getDnsSuffix(region)));\n  return {\n    url: customURL ? new AmplifyUrl(customURL) : defaultURL\n  };\n};\n/**\n * A Cognito Identity-specific middleware that disables caching for all requests.\n */\nconst disableCacheMiddlewareFactory = () => (next, _) => async function disableCacheMiddleware(request) {\n  request.headers['cache-control'] = 'no-store';\n  return next(request);\n};\n/**\n * A Cognito Identity-specific transfer handler that does NOT sign requests, and\n * disables caching.\n *\n * @internal\n */\nconst cognitoUserPoolTransferHandler = composeTransferHandler(unauthenticatedHandler, [disableCacheMiddlewareFactory]);\n/**\n * @internal\n */\nconst defaultConfig = {\n  service: SERVICE_NAME,\n  endpointResolver,\n  retryDecider: getRetryDecider(parseJsonError),\n  computeDelay: jitteredBackoff,\n  userAgentValue: getAmplifyUserAgent(),\n  cache: 'no-store'\n};\n/**\n * @internal\n */\nconst getSharedHeaders = operation => ({\n  'content-type': 'application/x-amz-json-1.1',\n  'x-amz-target': \"AWSCognitoIdentityProviderService.\".concat(operation)\n});\n/**\n * @internal\n */\nconst buildHttpRpcRequest = (_ref2, headers, body) => {\n  let {\n    url\n  } = _ref2;\n  return {\n    headers,\n    url,\n    body,\n    method: 'POST'\n  };\n};\nexport { buildHttpRpcRequest, cognitoUserPoolTransferHandler, defaultConfig, getSharedHeaders };","map":{"version":3,"names":["SERVICE_NAME","endpointResolver","_ref","_Amplify$getConfig$Au","region","authConfig","Amplify","getConfig","Auth","Cognito","customURL","userPoolEndpoint","defaultURL","AmplifyUrl","concat","getDnsSuffix","url","disableCacheMiddlewareFactory","next","_","disableCacheMiddleware","request","headers","cognitoUserPoolTransferHandler","composeTransferHandler","unauthenticatedHandler","defaultConfig","service","retryDecider","getRetryDecider","parseJsonError","computeDelay","jitteredBackoff","userAgentValue","getAmplifyUserAgent","cache","getSharedHeaders","operation","buildHttpRpcRequest","_ref2","body","method"],"sources":["/Users/raphaperso/Documents/Hub/amplify_test/notes/node_modules/@aws-amplify/auth/src/providers/cognito/utils/clients/CognitoIdentityProvider/base.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { getDnsSuffix, getRetryDecider, jitteredBackoff, parseJsonError, unauthenticatedHandler, } from '@aws-amplify/core/internals/aws-client-utils';\nimport { AmplifyUrl, getAmplifyUserAgent, } from '@aws-amplify/core/internals/utils';\nimport { composeTransferHandler } from '@aws-amplify/core/internals/aws-client-utils/composers';\n/**\n * The service name used to sign requests if the API requires authentication.\n */\nconst SERVICE_NAME = 'cognito-idp';\n/**\n * The endpoint resolver function that returns the endpoint URL for a given region.\n */\nconst endpointResolver = ({ region }) => {\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    const customURL = authConfig?.userPoolEndpoint;\n    const defaultURL = new AmplifyUrl(`https://${SERVICE_NAME}.${region}.${getDnsSuffix(region)}`);\n    return {\n        url: customURL ? new AmplifyUrl(customURL) : defaultURL,\n    };\n};\n/**\n * A Cognito Identity-specific middleware that disables caching for all requests.\n */\nconst disableCacheMiddlewareFactory = () => (next, _) => async function disableCacheMiddleware(request) {\n    request.headers['cache-control'] = 'no-store';\n    return next(request);\n};\n/**\n * A Cognito Identity-specific transfer handler that does NOT sign requests, and\n * disables caching.\n *\n * @internal\n */\nexport const cognitoUserPoolTransferHandler = composeTransferHandler(unauthenticatedHandler, [disableCacheMiddlewareFactory]);\n/**\n * @internal\n */\nexport const defaultConfig = {\n    service: SERVICE_NAME,\n    endpointResolver,\n    retryDecider: getRetryDecider(parseJsonError),\n    computeDelay: jitteredBackoff,\n    userAgentValue: getAmplifyUserAgent(),\n    cache: 'no-store',\n};\n/**\n * @internal\n */\nexport const getSharedHeaders = (operation) => ({\n    'content-type': 'application/x-amz-json-1.1',\n    'x-amz-target': `AWSCognitoIdentityProviderService.${operation}`,\n});\n/**\n * @internal\n */\nexport const buildHttpRpcRequest = ({ url }, headers, body) => ({\n    headers,\n    url,\n    body,\n    method: 'POST',\n});\n"],"mappings":";;;;;AAAA;AACA;AAKA;AACA;AACA;AACA,MAAMA,YAAY,GAAG,aAAa;AAClC;AACA;AACA;AACA,MAAMC,gBAAgB,GAAGC,IAAA,IAAgB;EAAA,IAAAC,qBAAA;EAAA,IAAf;IAAEC;EAAM,CAAE,GAAAF,IAAA;EAChC,MAAMG,UAAU,IAAAF,qBAAA,GAAGG,OAAO,CAACC,SAAS,EAAE,CAACC,IAAI,cAAAL,qBAAA,uBAAxBA,qBAAA,CAA0BM,OAAO;EACpD,MAAMC,SAAS,GAAGL,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEM,gBAAgB;EAC9C,MAAMC,UAAU,GAAG,IAAIC,UAAU,YAAAC,MAAA,CAAYd,YAAY,OAAAc,MAAA,CAAIV,MAAM,OAAAU,MAAA,CAAIC,YAAY,CAACX,MAAM,CAAC,CAAE,CAAC;EAC9F,OAAO;IACHY,GAAG,EAAEN,SAAS,GAAG,IAAIG,UAAU,CAACH,SAAS,CAAC,GAAGE;EACrD,CAAK;AACL,CAAC;AACD;AACA;AACA;AACA,MAAMK,6BAA6B,GAAGA,CAAA,KAAM,CAACC,IAAI,EAAEC,CAAC,KAAK,eAAeC,sBAAsBA,CAACC,OAAO,EAAE;EACpGA,OAAO,CAACC,OAAO,CAAC,eAAe,CAAC,GAAG,UAAU;EAC7C,OAAOJ,IAAI,CAACG,OAAO,CAAC;AACxB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACY,MAACE,8BAA8B,GAAGC,sBAAsB,CAACC,sBAAsB,EAAE,CAACR,6BAA6B,CAAC;AAC5H;AACA;AACA;AACY,MAACS,aAAa,GAAG;EACzBC,OAAO,EAAE3B,YAAY;EACrBC,gBAAgB;EAChB2B,YAAY,EAAEC,eAAe,CAACC,cAAc,CAAC;EAC7CC,YAAY,EAAEC,eAAe;EAC7BC,cAAc,EAAEC,mBAAmB,EAAE;EACrCC,KAAK,EAAE;AACX;AACA;AACA;AACA;AACY,MAACC,gBAAgB,GAAIC,SAAS,KAAM;EAC5C,cAAc,EAAE,4BAA4B;EAC5C,cAAc,uCAAAvB,MAAA,CAAuCuB,SAAS;AAClE,CAAC;AACD;AACA;AACA;AACY,MAACC,mBAAmB,GAAGA,CAAAC,KAAA,EAAUjB,OAAO,EAAEkB,IAAI;EAAA,IAAtB;IAAExB;EAAG,CAAE,GAAAuB,KAAA;EAAA,OAAqB;IAC5DjB,OAAO;IACPN,GAAG;IACHwB,IAAI;IACJC,MAAM,EAAE;EACZ,CAAC;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}